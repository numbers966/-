<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>كاشف الأرقام | Snapchat Style</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

        body {
            font-family: 'Cairo', sans-serif;
            background-color: #FFFC00; /* لون سناب شات الشهير */
            margin: 0;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .iphone-frame {
            width: 375px;
            height: 812px;
            background: #fff;
            border-radius: 40px;
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            overflow: hidden;
            border: 8px solid #333;
        }

        .screen-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .hidden {
            display: none !important;
        }

        .snap-input {
            border: none;
            border-bottom: 2px solid #e2e8f0;
            padding: 10px;
            width: 100%;
            margin-bottom: 20px;
            outline: none;
            transition: border-color 0.3s;
            text-align: center;
        }

        .snap-input:focus {
            border-bottom-color: #000;
        }

        .snap-btn {
            background-color: #00bfff;
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 191, 255, 0.3);
            border: none;
            transition: transform 0.2s;
        }

        .snap-btn:active {
            transform: scale(0.95);
        }

        .admin-badge {
            background: #ff4b2b;
            color: white;
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 12px;
            margin-top: 5px;
        }

        /* تحسينات الواجهة */
        .card {
            background: #f7f7f7;
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <div class="iphone-frame">
        <div class="screen-content">
            
            <!-- 1. شاشة الدخول -->
            <div id="loginPage" class="flex flex-col items-center justify-center h-full text-center">
                <div class="mb-8">
                    <i class="fab fa-snapchat-ghost text-7xl text-yellow-400 drop-shadow-lg"></i>
                </div>
                <h1 class="text-2xl font-bold mb-2">مرحباً بك</h1>
                <p class="text-gray-500 mb-8">يرجى إدخال أيدي حسابك تيليجرام للمتابعة</p>
                
                <input type="text" id="telegramIdInput" class="snap-input" placeholder="ايدي تيليجرام (مثال: 123456)">
                <button onclick="handleLogin()" class="snap-btn w-full">دخول</button>
            </div>

            <!-- 2. الصفحة الرئيسية للمستخدم -->
            <div id="mainPage" class="hidden flex flex-col h-full">
                <div class="flex items-center justify-between py-4 border-b">
                    <i class="fas fa-search text-gray-400"></i>
                    <span class="font-bold">كاشف الأرقام</span>
                    <i class="fas fa-cog text-gray-400"></i>
                </div>

                <div class="card text-center mt-10">
                    <h2 class="text-lg font-bold mb-4">ادخل يوزر / ايدي لكشف رقمه</h2>
                    <input type="text" id="searchUserInput" class="snap-input" placeholder="@username or ID">
                    <button onclick="searchUser()" class="snap-btn w-full bg-black">كشف الآن</button>
                </div>

                <div id="statusMessage" class="hidden mt-6 p-4 bg-red-100 text-red-600 rounded-xl text-center font-bold">
                    الموقع حالياً معلق، حاول لاحقاً.
                </div>

                <div class="mt-auto mb-10 text-center text-xs text-gray-400">
                    جميع الحقوق محفوظة 2024
                </div>
            </div>

            <!-- 3. لوحة تحكم الآدمن -->
            <div id="adminPage" class="hidden flex flex-col h-full">
                <div class="flex items-center justify-between py-4 border-b bg-red-50 -mx-5 px-5">
                    <span class="font-bold text-red-600">لوحة الإدارة</span>
                    <button onclick="location.reload()" class="text-xs bg-gray-200 px-2 py-1 rounded">خروج</button>
                </div>

                <div class="mt-4">
                    <h3 class="font-bold mb-3"><i class="fas fa-users ml-2"></i> المستخدمين المسجلين:</h3>
                    <div id="userList" class="space-y-2 overflow-y-auto max-h-[600px]">
                        <!-- قائمة المستخدمين تظهر هنا -->
                        <p class="text-center text-gray-400 mt-10">لا يوجد مسجلين بعد</p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        const ADMIN_ID = "44444444444444";
        
        // محاكاة قاعدة بيانات في ذاكرة المتصفح
        let registeredUsers = JSON.parse(localStorage.getItem('snap_users')) || [];

        function handleLogin() {
            const userId = document.getElementById('telegramIdInput').value.trim();

            if (!userId) {
                alert("يرجى إدخال الآيدي أولاً");
                return;
            }

            // التحقق إذا كان آدمن
            if (userId === ADMIN_ID) {
                showPage('adminPage');
                displayUsers();
                return;
            }

            // إذا كان مستخدم عادي، نحفظ الآيدي الخاص به
            if (!registeredUsers.includes(userId)) {
                registeredUsers.push(userId);
                localStorage.setItem('snap_users', JSON.stringify(registeredUsers));
            }

            // ننتقل للصفحة الرئيسية
            showPage('mainPage');
        }

        function searchUser() {
            const input = document.getElementById('searchUserInput').value;
            if(!input) return;
            
            const msg = document.getElementById('statusMessage');
            msg.classList.remove('hidden');
            
            // إخفاء الرسالة بعد 5 ثواني
            setTimeout(() => {
                msg.classList.add('hidden');
            }, 5000);
        }

        function displayUsers() {
            const container = document.getElementById('userList');
            if (registeredUsers.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-400 mt-10">لا يوجد مسجلين بعد</p>';
                return;
            }

            container.innerHTML = registeredUsers.map(id => `
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-gray-100">
                    <span class="font-mono text-sm">${id}</span>
                    <span class="text-[10px] text-green-500 font-bold uppercase">Online</span>
                </div>
            `).join('');
        }

        function showPage(pageId) {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('mainPage').classList.add('hidden');
            document.getElementById('adminPage').classList.add('hidden');
            
            document.getElementById(pageId).classList.remove('hidden');
        }
    </script>
</body>
</html>

